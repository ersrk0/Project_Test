
CREATE TABLE incident_master (
	id bigserial NOT NULL,
	incident_id uuid NOT NULL,
	incident_type_lookup varchar(10) NOT NULL,
	module_code varchar(10) NOT NULL,
	raised_by_type_lookup varchar(10) NOT NULL,
	raised_by_id varchar(50) NOT NULL,
	raised_by_role_lookup varchar(10) NOT NULL,
	raised_against_type_lookup varchar(10) NOT NULL,
	raised_against_role_lookup varchar(10) NOT NULL,
	incident_reason_lookup varchar(10) NOT NULL,
	issue_type_lookup varchar(10) NOT NULL,
	incident_title varchar(100) NOT NULL,
	incident_description varchar(1024) NOT NULL,
	status_lookup varchar(10) NOT NULL,
	severity_lookup varchar(10) NOT NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT incident_master_pkey PRIMARY KEY (id)
);


CREATE TABLE pre_contract_incident (
	id bigserial NOT NULL,
	incident_master_fk int8 NOT NULL,
	trader_id varchar(12) NOT NULL,
	category_code uuid NULL,
	product_id varchar(20) NULL,
	catalog_id varchar(20) NULL,
	comp_id varchar(20) NULL,
	skuid varchar(20) NULL,
	brand_id varchar(20) NULL,
	service_id varchar(20) NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT pre_contract_incident_pkey PRIMARY KEY (id)
);


CREATE TABLE post_contract_incident (
	id bigserial NOT NULL,
	incident_master_fk int8 NOT NULL,
	auction_id uuid NULL,
	bid_id uuid NULL,
	order_id varchar(20) NULL,
	product_id varchar(20) NULL,
	product_name varchar(20) NULL,
	contract_no varchar(20) NOT NULL,
	invoice_id varchar(20) NULL,
	trader_id varchar(12) NOT NULL,
	pan_no varchar(10) NULL,
	is_debarred bool NOT NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT post_contract_incident_pkey PRIMARY KEY (id)
);
CREATE TABLE debarment_detail (
	id bigserial NOT NULL,
	debarment_id uuid NOT NULL,
	post_contract_incident_fk int8 NOT NULL,
	debarment_clause_lookup varchar(10) NOT NULL,
	debarment_start_date timestamp NOT NULL,
	debarment_end_date timestamp NOT NULL,
	competent_authority_name varchar(20) NOT NULL,
	competent_authority_designation varchar(20) NOT NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT debarment_detail_pkey PRIMARY KEY (id)
);
CREATE TABLE incident_doc_master (
	id bigserial NOT NULL,
	doc_id uuid NOT NULL,
	incident_master_fk int8 NOT NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT incident_doc_master_pkey PRIMARY KEY (id)
);

CREATE TABLE doc_attachment (
	id bigserial NOT NULL,
	attachment_id uuid NOT NULL,
	incident_doc_master_fk int8 NOT NULL,
	file_name varchar(50) NOT NULL,
	file_type_lookup varchar(10) NOT NULL,
	file_path varchar(100) NOT NULL,
	file_size numeric NOT NULL,
	uploaded_by_type_lookup varchar(10) NOT NULL,
	uploaded_by_id varchar(20) NOT NULL,
	status_lookup varchar(10) NOT NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT doc_attachment_pkey PRIMARY KEY (id)
);

CREATE TABLE incident_status_log (
	id bigserial NOT NULL,
	log_id uuid NOT NULL,
	incident_master_fk int8 NOT NULL,
	action_type_lookup varchar(10) NOT NULL,
	previous_status_lookup varchar(10) NULL,
	current_status_lookup varchar(10) NOT NULL,
	action_by_type_lookup varchar(10) NOT NULL,
	action_by_id varchar(20) NOT NULL,
	incident_doc_master_fk int8 NULL,
	remarks varchar(1024) NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT incident_status_log_pkey PRIMARY KEY (id)
);

CREATE TABLE lookup (
	id bigserial NOT NULL,
	lookup_code varchar(10) NOT NULL,
	lookup_name varchar(255) NOT NULL,
	lookup_value varchar(255) NOT NULL,
	language_code varchar(5) NOT NULL,
	description varchar(1024) NOT NULL,
	is_mandatory bool NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT lookup_pkey PRIMARY KEY (id)
);

CREATE TABLE message_reference (
	id bigserial NOT NULL,
	language_code varchar(5) NOT NULL,
	message_type_lookup varchar(10) NOT NULL,
	message varchar(1024) NOT NULL,
	message_code varchar(20) NOT NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT message_reference_pkey PRIMARY KEY (id)
);

CREATE TABLE related_lookup (
	id bigserial NOT NULL,
	relation_name varchar(50) NOT NULL,
	parent_lookup_code varchar(10) NOT NULL,
	child_lookup_code varchar(10) NOT NULL,
	is_mandatory bool NULL,
	created_by varchar(50) NOT NULL,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_by varchar(50) NOT NULL,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	is_deleted bool NOT NULL DEFAULT false,
	deleted_at timestamp NULL,
	channel_id varchar(10) NOT NULL,
	created_by_app_version varchar(10) NOT NULL,
	updated_by_app_version varchar(10) NOT NULL,
	CONSTRAINT related_lookup_pkey PRIMARY KEY (id)
);
